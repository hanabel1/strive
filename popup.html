<!doctype html><meta charset="utf-8" />
<title>Prompt API Tester</title>
<button id="run">Start / Check</button>
<pre id="log"></pre>
<script type="module">
  const log = (...a) => (logEl.textContent += a.join(" ") + "\n");
  const logEl = document.getElementById("log");

  document.getElementById("run").onclick = async () => {
    try {
      const opts = {}; // keep identical if you add options later
      const a = await LanguageModel.availability(opts);
      log("availability:", a); // 'downloadable' | 'downloading' | 'available'

      const session = await LanguageModel.create({
        ...opts,
        monitor(m) {
          m.addEventListener("downloadprogress", e => {
            log("download:", Math.round(e.loaded * 100) + "%");
          });
        }
      });

      const out = await session.prompt('Say "ready" if you are ready.');
      log("reply:", out);
    } catch (e) {
      log("error:", e.message || e);
    }
  };
</script>
